<!doctype html> 
<html lang="en"> 
<head> 
	<meta charset="UTF-8" />
	<title>No-boo</title>
	<script type="text/javascript" src="js/phaser.min.js"></script>    
</head>
<body>

<script type="text/javascript">

var game = new Phaser.Game(600, 480, Phaser.AUTO);
var instruction;

var HowToPlay = {
	preload: function () {
		game.load.image('fantasma_vermelho', 'assets/vermelho_direita2.png');
    	game.load.image('fantasma_cinza', 'assets/cinza_esquerda3.png');
        game.load.image('fantasma_verde', 'assets/verde_direita2.png');
        game.load.image('coracao', 'assets/coracao.jpg');
        game.load.image('pac', 'assets/pac_aberto.png');
    },
    create: function () {
    	//instruction = game.add.text(16, 16, 'Mate os fantasmas.\nEvite o pac-man.\nFique de olho no cronômetro.\nVocê dispõe de três vidas.\nDivirta-se!', { fontSize: '32px', fill: '#fff' });
    	game.add.sprite(10, 10, 'fantasma_vermelho');
    	instruction = game.add.text(150, 20, 'Mate os fantasmas.', { fontSize: '32px', fill: '#fff' });
    	game.add.sprite(game.world.width-40, 10, 'fantasma_cinza');
    	game.add.sprite(10, 100, 'fantasma_verde');
    	instruction = game.add.text(150, 100, 'Evite o pac-man.', { fontSize: '32px', fill: '#fff' });
    	game.add.sprite(150, 150, 'pac');
    	instruction = game.add.text(80, 200, 'Fique de olho no cronômetro.', { fontSize: '32px', fill: '#fff' });
    	instruction = game.add.text(500, 200, '00:30', { fontSize: '32px', fill: '#19BCE5' });
    	instruction = game.add.text(80, 300, 'Você dispõe de três vidas.', { fontSize: '32px', fill: '#fff' });
    	game.add.sprite(450, 300, 'coracao');
    	game.add.sprite(490, 300, 'coracao');
    	game.add.sprite(530, 300, 'coracao');
    	instruction = game.add.text(250, 400, 'Divirta-se!', { fontSize: '32px', fill: '#fff' });
    },
    update:function() {
    	
    }
}

var SoundTest = {
	preload:function(){
		game.load.image('fantasma_vermelho', 'assets/vermelho_direita2.png');
		game.load.image('pac', 'assets/pac_aberto.png');
		game.load.image('BackGround', 'assets/Telas/Wireframes/splash do jogo.png')
		game.load.audio('MusicaFundo', 'Som/GhostBusters_.mp3')
		game.load.audio('clickFantasma1', 'Som/plop1.wav')
		game.load.audio('clickFantasma2', 'Som/plop2.wav')
		game.load.audio('clickFantasma3', 'Som/plop3.wav')
		game.load.audio('clickFantasma4', 'Som/plop4.wav')
		game.load.audio('clickFantasma5', 'Som/plop5.wav')
		game.load.audio('clickFantasma6', 'Som/plop6.wav')
		game.load.audio('clickFantasma7', 'Som/plop7.wav')
		game.load.audio('clickFantasma8', 'Som/plop8.wav')
		game.load.audio('clickFantasma9', 'Som/plop9.wav')
		game.load.audio('clickPacMan', 'Som/Fail.wav')
		game.load.audio('ending', 'Som/ending.wav')
	},
	create:function(){
		game.add.sprite(0,0,'BackGround');
		var countClickFantasma = 0;
		var soundEnd = game.add.audio('ending');
		var fantasma = game.add.sprite(game.width/2 + 30,game.height/2, 'fantasma_vermelho');
		fantasma.inputEnabled=true;
	    fantasma.events.onInputDown.add(PlaySound = function(){
	    	var somFantasma = game.add.audio('clickFantasma'+game.rnd.integerInRange(1, 9));
			somFantasma.play();
	    },this);
    	var somPacMan = game.add.audio('clickPacMan', 0.5);
		var pacMan = game.add.sprite(game.width/2 - 30, game.height/2, 'pac');
		pacMan.inputEnabled=true;
	    pacMan.events.onInputDown.add(PlaySound = function(){
	    	if(countClickFantasma > 2){
	    		soundEnd.play();
	    		countClickFantasma = 0;
	    	}else{
				somPacMan.play();
		    	countClickFantasma++;
		    }
	    },this);
		var somFundo = game.add.audio('MusicaFundo');
		var somPacMan = game.add.audio('clickPacMan', 0.2);
		//somFundo.play();
	},
	update:function(){
		
	}
}

var animations = {
		grupoFantasmaCinza:null,
		grupoFantasmalaranja:null,
		grupoFantasmalilas:null,
		grupoFantasmaverde:null,
		grupoFantasmavermelho:null,
		grupoPacMan:null,
		preload:function(){
			game.load.atlas('Textures', 'assets/AllTextures1.png', 'assets/AllTextures1.json') 
			game.load.spritesheet('pacman', 'assets/pacman.png', 33, 32)
			game.load.audio('MusicaFundo', 'audio/GhostBusters.mp3')
			game.load.audio('clickFantasma1', 'audio/plop1.wav')
			game.load.audio('clickFantasma2', 'audio/plop2.wav')
			game.load.audio('clickFantasma3', 'audio/plop3.wav')
			game.load.audio('clickFantasma4', 'audio/plop4.wav')
			game.load.audio('clickFantasma5', 'audio/plop5.wav')
			game.load.audio('clickFantasma6', 'audio/plop6.wav')
			game.load.audio('clickFantasma7', 'audio/plop7.wav')
			game.load.audio('clickFantasma8', 'audio/plop8.wav')
			game.load.audio('clickFantasma9', 'audio/plop9.wav')
			game.load.audio('clickPacMan', 'audio/Fail.wav')
		},
		create:function(){
			
			this.grupoFantasmaCinza = game.add.group()
			this.grupoFantasmalaranja = game.add.group()
			this.grupoFantasmalilas = game.add.group()
			this.grupoFantasmaverde = game.add.group()
			this.grupoFantasmavermelho = game.add.group()
			
			for(var i=0;i<3;i++){
				var fantasmaCinza = game.add.sprite(game.rnd.integerInRange(0, 640), game.rnd.integerInRange(0, 480), 'Textures')
				fantasmaCinza.anchor.x = 0.5;
				fantasmaCinza.anchor.y = 0.5;
				fantasmaCinza.animations.add('MoveDown', Phaser.Animation.generateFrameNames('cinza_baixo', 3, 4, '.png'), 8, true);
				fantasmaCinza.animations.add('MoveUp', Phaser.Animation.generateFrameNames('cinza_cima', 3, 4, '.png'), 8, true);
				fantasmaCinza.animations.add('MoveLeft', Phaser.Animation.generateFrameNames('cinza_esquerda', 3, 4, '.png'), 8, true);
				fantasmaCinza.animations.add('MoveRight', Phaser.Animation.generateFrameNames('cinza_direita', 3, 4, '.png'), 8, true);
				var direcao = game.rnd.integerInRange(0, 360)
				fantasmaCinza.body.velocity.x = Math.cos(direcao*0.0174)*50;
				fantasmaCinza.body.velocity.y = Math.sin(direcao*0.0174)*50;
				fantasmaCinza.body.collideWorldBounds = true;
				fantasmaCinza.body.bounce.setTo(1, 1);
				fantasmaCinza.inputEnabled=true;
				fantasmaCinza.events.onInputDown.add(elimine = function(fantasma){
					fantasma.destroy();
					var somFantasma = game.add.audio('clickFantasma'+game.rnd.integerInRange(1, 9));
					somFantasma.play();
					var explosao = game.add.sprite(fantasma.x, fantasma.y, 'Textures')
					explosao.anchor.x = 0.5;
					explosao.anchor.y = 0.5;
					explosao.animations.add('explode', Phaser.Animation.generateFrameNames('explosao', 1, 10, '.png'), 8, false);
					explosao.animations.play('explode', 30, false, true)
				},null);
				this.grupoFantasmaCinza.add(fantasmaCinza)
			}
			
			
			for(var i=0;i<3;i++){
				var fantasmalaranja = game.add.sprite(game.rnd.integerInRange(0, 640), game.rnd.integerInRange(0, 480), 'Textures')
				fantasmalaranja.anchor.x = 0.5;
				fantasmalaranja.anchor.y = 0.5;
				fantasmalaranja.animations.add('MoveDown', Phaser.Animation.generateFrameNames('laranja_baixo', 3, 4, '.png'), 8, true);
				fantasmalaranja.animations.add('MoveUp', Phaser.Animation.generateFrameNames('laranja_cima', 3, 4, '.png'), 8, true);
				fantasmalaranja.animations.add('MoveLeft', Phaser.Animation.generateFrameNames('laranja_esquerda', 3, 4, '.png'), 8, true);
				fantasmalaranja.animations.add('MoveRight', Phaser.Animation.generateFrameNames('laranja_direita', 3, 4, '.png'), 8, true);
				var direcao = game.rnd.integerInRange(0, 360)
				fantasmalaranja.body.velocity.x = Math.cos(direcao*0.0174)*50;
				fantasmalaranja.body.velocity.y = Math.sin(direcao*0.0174)*50;
				fantasmalaranja.body.collideWorldBounds = true;
				fantasmalaranja.body.bounce.setTo(1, 1);
				fantasmalaranja.inputEnabled=true;
				fantasmalaranja.events.onInputDown.add(elimine = function(fantasma){
					fantasma.destroy();
					var somFantasma = game.add.audio('clickFantasma'+game.rnd.integerInRange(1, 9));
					somFantasma.play();
					var explosao = game.add.sprite(fantasma.x, fantasma.y, 'Textures')
					explosao.anchor.x = 0.5;
					explosao.anchor.y = 0.5;
					explosao.animations.add('explode', Phaser.Animation.generateFrameNames('explosao', 1, 10, '.png'), 8, false);
					explosao.animations.play('explode', 30, false, true)
				},null);
				this.grupoFantasmalaranja.add(fantasmalaranja)
			}
			
			for(var i=0;i<3;i++){
				var fantasmalilas = game.add.sprite(game.rnd.integerInRange(0, 640), game.rnd.integerInRange(0, 480), 'Textures')
				fantasmalilas.anchor.x = 0.5;
				fantasmalilas.anchor.y = 0.5;
				fantasmalilas.animations.add('MoveDown', Phaser.Animation.generateFrameNames('lilas_baixo', 3, 4, '.png'), 8, true);
				fantasmalilas.animations.add('MoveUp', Phaser.Animation.generateFrameNames('lilas_cima', 3, 4, '.png'), 8, true);
				fantasmalilas.animations.add('MoveLeft', Phaser.Animation.generateFrameNames('lilas_esquerda', 3, 4, '.png'), 8, true);
				fantasmalilas.animations.add('MoveRight', Phaser.Animation.generateFrameNames('lilas_direita', 3, 4, '.png'), 8, true);
				var direcao = game.rnd.integerInRange(0, 360)
				fantasmalilas.body.velocity.x = Math.cos(direcao*0.0174)*50;
				fantasmalilas.body.velocity.y = Math.sin(direcao*0.0174)*50;
				fantasmalilas.body.collideWorldBounds = true;
				fantasmalilas.body.bounce.setTo(1, 1);
				fantasmalilas.inputEnabled=true;
				fantasmalilas.events.onInputDown.add(elimine = function(fantasma){
					fantasma.destroy();
					var somFantasma = game.add.audio('clickFantasma'+game.rnd.integerInRange(1, 9));
					somFantasma.play();
					var explosao = game.add.sprite(fantasma.x, fantasma.y, 'Textures')
					explosao.anchor.x = 0.5;
					explosao.anchor.y = 0.5;
					explosao.animations.add('explode', Phaser.Animation.generateFrameNames('explosao', 1, 10, '.png'), 8, false);
					explosao.animations.play('explode', 30, false, true)
				},null);
				this.grupoFantasmalilas.add(fantasmalilas)
			}
			
			for(var i=0;i<3;i++){
				var fantasmaverde = game.add.sprite(game.rnd.integerInRange(0, 640), game.rnd.integerInRange(0, 480), 'Textures')
				fantasmaverde.anchor.x = 0.5;
				fantasmaverde.anchor.y = 0.5;
				fantasmaverde.animations.add('MoveDown', Phaser.Animation.generateFrameNames('verde_baixo', 3, 4, '.png'), 8, true);
				fantasmaverde.animations.add('MoveUp', Phaser.Animation.generateFrameNames('verde_cima', 3, 4, '.png'), 8, true);
				fantasmaverde.animations.add('MoveLeft', Phaser.Animation.generateFrameNames('verde_esquerda', 3, 4, '.png'), 8, true);
				fantasmaverde.animations.add('MoveRight', Phaser.Animation.generateFrameNames('verde_direita', 3, 4, '.png'), 8, true);
				var direcao = game.rnd.integerInRange(0, 360)
				fantasmaverde.body.velocity.x = Math.cos(direcao*0.0174)*50;
				fantasmaverde.body.velocity.y = Math.sin(direcao*0.0174)*50;
				fantasmaverde.body.collideWorldBounds = true;
				fantasmaverde.body.bounce.setTo(1, 1);
				fantasmaverde.inputEnabled=true;
				fantasmaverde.events.onInputDown.add(elimine = function(fantasma){
					fantasma.destroy();
					var somFantasma = game.add.audio('clickFantasma'+game.rnd.integerInRange(1, 9));
					somFantasma.play();
					var explosao = game.add.sprite(fantasma.x, fantasma.y, 'Textures')
					explosao.anchor.x = 0.5;
					explosao.anchor.y = 0.5;
					explosao.animations.add('explode', Phaser.Animation.generateFrameNames('explosao', 1, 10, '.png'), 8, false);
					explosao.animations.play('explode', 30, false, true)
				},null);
				this.grupoFantasmaverde.add(fantasmaverde)
			}
			
			for(var i=0;i<3;i++){
				var fantasmavermelho = game.add.sprite(game.rnd.integerInRange(0, 640), game.rnd.integerInRange(0, 480), 'Textures')
				fantasmavermelho.anchor.x = 0.5;
				fantasmavermelho.anchor.y = 0.5;
				fantasmavermelho.animations.add('MoveDown', Phaser.Animation.generateFrameNames('vermelho_baixo', 3, 4, '.png'), 8, true);
				fantasmavermelho.animations.add('MoveUp', Phaser.Animation.generateFrameNames('vermelho_cima', 3, 4, '.png'), 8, true);
				fantasmavermelho.animations.add('MoveLeft', Phaser.Animation.generateFrameNames('vermelho_esquerda', 3, 4, '.png'), 8, true);
				fantasmavermelho.animations.add('MoveRight', Phaser.Animation.generateFrameNames('vermelho_direita', 3, 4, '.png'), 8, true);
				var direcao = game.rnd.integerInRange(0, 360)
				fantasmavermelho.body.velocity.x = Math.cos(direcao*0.0174)*50;
				fantasmavermelho.body.velocity.y = Math.sin(direcao*0.0174)*50;
				fantasmavermelho.body.collideWorldBounds = true;
				fantasmavermelho.body.bounce.setTo(1, 1);
				fantasmavermelho.inputEnabled=true;
				fantasmavermelho.events.onInputDown.add(elimine = function(fantasma){
					fantasma.destroy();
					var somFantasma = game.add.audio('clickFantasma'+game.rnd.integerInRange(1, 9));
					somFantasma.play();
					var explosao = game.add.sprite(fantasma.x, fantasma.y, 'Textures')
					explosao.anchor.x = 0.5;
					explosao.anchor.y = 0.5;
					explosao.animations.add('explode', Phaser.Animation.generateFrameNames('explosao', 1, 10, '.png'), 8, false);
					explosao.animations.play('explode', 30, false, true)
				},null);
				this.grupoFantasmavermelho.add(fantasmavermelho)
			}
			
			for(var i=0;i<9;i++){
				var pacman = game.add.sprite(game.rnd.integerInRange(0, 620), game.rnd.integerInRange(0, 460), 'pacman')
				pacman.animations.add('Move', [2,3], 8, true);
				var direcao = game.rnd.integerInRange(0, 360)
				pacman.body.velocity.x = Math.cos(direcao*0.0174)*50;
				pacman.body.velocity.y = Math.sin(direcao*0.0174)*50;
				pacman.body.collideWorldBounds = true;
				pacman.body.bounce.setTo(1, 1);
				pacman.inputEnabled=true;
				pacman.events.onInputDown.add(elimine = function(pac){
					var somPacMan = game.add.audio('clickPacMan', 0.2);
					somPacMan.play();
					pac.animations.add('fail', [0,3,1,2,0,3,1,2,0,3,1,2], true);
					pac.animations.play('fail', 15, false, false)
				},null);
				this.grupoFantasmavermelho.add(fantasmavermelho)
			}

		},
		update:function(){
			
		}
}

//game.state.add('HowToPlay', HowToPlay, true);
//game.state.add('Test', SoundTest, true);
game.state.add('Animations', animations, true);


</script>

</body>
</html>